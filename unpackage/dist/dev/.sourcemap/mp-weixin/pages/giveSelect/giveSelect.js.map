{"version":3,"sources":["uni-app:///main.js","webpack:///D:/work/fucai/pages/giveSelect/giveSelect.vue?683a","webpack:///D:/work/fucai/pages/giveSelect/giveSelect.vue?8436","webpack:///D:/work/fucai/pages/giveSelect/giveSelect.vue?869b","webpack:///D:/work/fucai/pages/giveSelect/giveSelect.vue?812e","uni-app:///pages/giveSelect/giveSelect.vue","webpack:///D:/work/fucai/pages/giveSelect/giveSelect.vue?1483"],"names":["createPage","Page","renderjs","component","options","__file","components","uniSegmentedControl","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","console","log","latitude","elem","distance","slice"],"mappings":";;;;wEAAA,qBACA,sBACA,oD,mDACAA,EAAWC,a;;;;2DCHX,4TACIC,EADJ,uMASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,kCACZ,aAAAF,E;;;;2GCvBf,u0C;;;;2GCAA,8LAAIG,EAAa,CACfC,oBAAqB,WACnB,OAAO,kOAKPC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCdvB,y5BAAk2B,eAAG,G;;;;0ICiDr2B,yC,uDACIJ,E,2kBACJ,CACE,WAAF,uCACE,KAFF,WAGI,MAAJ,CACM,MAAN,gBACM,QAAN,EACM,YAAN,GACM,WAAN,GACM,GAAN,KAGE,OAXF,SAWA,GACI,EAAJ,KACI,EAAJ,cACI,EAAJ,QACI,QAAJ,WAEE,QAAF,CAEI,cAFJ,SAEA,KACM,EAAN,oEACM,EAAN,cACQ,MAAR,KAGI,YARJ,SAQA,GACM,QAAN,aACA,SAIA,gCACQ,KAAR,yBAII,WAnBJ,SAmBA,OACM,GAAN,QAKQ,OAJA,EAAR,8CACQ,EAAR,cACU,MAAV,IAIM,EAAN,iEACM,GAAN,cACQ,MAAR,KAGI,OAhCJ,SAgCA,GACM,EAAN,UAEI,MAnCJ,SAmCA,GAEM,EAAN,qBAIM,QAAN,QAEI,YA3CJ,SA2CA,SACM,EAAN,4BADA,EACA,WADA,EACA,UACMK,QAAQC,IAAIC,EAAlB,GACM,EAAN,iBACQ,KAAR,mBACQ,KAAR,CACU,KAAV,EACU,UAAV,EACU,SAAV,EACU,KAAV,EACU,KAAV,EACU,KAAV,GACU,KAAV,IAEQ,QAAR,YACU,IAAV,EACU,EAAV,+BACA,mBACc,EAAd,wBACcC,EAAKC,SAAWD,EAAKC,SAASC,MAAM,EAAlD,SAGU,EAAV,uBACU,QAAV,WAKI,aAvEJ,SAuEA,GACM,IAAN,KACM,EAAN,mCACA,OACU,EAAV,2BACU,EAAV,SAGM,GAAN,YACQ,IAAR,kCAII,UApFJ,WAoFA,MACM,EAAN,6BADA,EACA,GACM,QAAN,OACM,EAAN,iBACQ,KAAR,yBACQ,KAAR,EACQ,QAAR,YACU,QAAV,OACU,EAAV,6BAME,MAAF,CACI,QADJ,SACA,GACA,KACQ,EAAR,cAEQ,EAAR,e;;;;2DC3KA,ymDAA2jD,eAAG,G","file":"pages/giveSelect/giveSelect.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/giveSelect/giveSelect.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./giveSelect.vue?vue&type=template&id=149f8926&scoped=true&\"\nvar renderjs\nimport script from \"./giveSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./giveSelect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./giveSelect.vue?vue&type=style&index=0&id=149f8926&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"149f8926\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/giveSelect/giveSelect.vue\"\nexport default component.exports","export * from \"-!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./giveSelect.vue?vue&type=template&id=149f8926&scoped=true&\"","var components = {\n  uniSegmentedControl: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-segmented-control/uni-segmented-control\" */ \"@/components/uni-segmented-control/uni-segmented-control.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./giveSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./giveSelect.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"giveSelect\">\r\n    <!-- <view class=\"giveselect_tabs\"> -->\r\n      <uni-segmented-control :current=\"current\" :values=\"items\" @clickItem=\"onClickItem\" style-type=\"button\" active-color=\"#ff3c35\"></uni-segmented-control>\r\n        <view class=\"content\">\r\n          <!-- 门店自提开始 -->\r\n            <view v-if=\"current === 0\">\r\n              <view class=\"give_search\">\r\n                <text class=\"iconfont icon-dizhi\"></text>湘潭\r\n                <view class=\"search\">\r\n                  <uni-search-bar  :radius=\"20\" placeholder=\"搜索附近门店\" @confirm=\"search\"  @input=\"input\"></uni-search-bar>\r\n                </view>\r\n              </view>\r\n            <!-- 搜索列表开始 -->\r\n            <view class=\"search_wrap\">\r\n              <view class=\"search_item\" v-for=\"(item) in adressList\" :key=\"item.F_CompanyId\">\r\n                <view class=\"search_item_left\">\r\n                  <view class=\"search_left_title\">{{item.F_FullName}}</view>\r\n                  <view class=\"search_left_text\">{{item.F_Address}}</view>\r\n                </view>\r\n                <view class=\"search_item_right\">\r\n                  <view class=\"search_right_num\">{{item.distance}}km</view>\r\n                  <view class=\"search_right_btn\" @click=\"handleSuer(item.F_CompanyId,item.F_FullName,item.distance)\">确认选择</view>\r\n                </view>\r\n              </view>\r\n            </view>\r\n            <!-- 搜索列表结束 -->\r\n            </view>\r\n          <!-- 门店自提结束 -->\r\n            <view v-if=\"current === 1\">\r\n                <view class=\"songhuo_wrap\">\r\n                  <view class=\"songhuo_item\" v-for=\"(item,index) in shouhuoList\" :key=\"index\">\r\n                    <view class=\"songhuo_item_left\">\r\n                      <view class=\"songhuo_title\">{{item.Address}}</view>\r\n                      <view class=\"songhuo_info\">{{item.Name}}<text>{{item.Phone}}</text></view>\r\n                    </view>\r\n                    <view class=\"songhuo_btn\">\r\n                      <view class=\"songhuo_item_right\" @click=\"handleUpdate(index)\">编辑</view>\r\n                    <view class=\"songhuo_btn_item\" @click=\"handlequeding(item.Address,item.ID)\">确认选择</view>\r\n                    </view>\r\n                  </view>\r\n                </view>\r\n            </view>\r\n        </view>\r\n  </view>\r\n</template>\r\n<script>\r\nimport uniSegmentedControl from \"../../components/uni-segmented-control/uni-segmented-control.vue\";\r\nimport uniSearchBar from '../../components/uni-search-bar/uni-search-bar/uni-search-bar.vue';\r\nimport common from '../../common/common';\r\nvar _self;\r\nexport default {\r\n    components: {uniSegmentedControl,uniSearchBar},\r\n    data() {\r\n        return {\r\n            items: ['门店自提','送货上门'],\r\n            current: 0,\r\n            shouhuoList:[],\r\n            adressList:[],\r\n            id:\"\"\r\n        }\r\n    },\r\n    onLoad(options){\r\n      _self = this;\r\n      _self.getWanddian();\r\n      _self.id = options.id;\r\n      console.log(options.id);\r\n    },\r\n    methods: {\r\n      // 确认选择外送地址\r\n      handlequeding(name,id){\r\n        uni.setStorageSync(\"outlets\",{id,name,juli:null,current:_self.current} );\r\n        uni.navigateBack({\r\n          delta: 1\r\n        });\r\n      },\r\n      onClickItem(e) {\r\n        console.log(1111111);\r\n        if(_self.id == 1){\r\n          return;\r\n        }\r\n        \r\n        if (this.current !== e.currentIndex) {\r\n            this.current = e.currentIndex;\r\n        }\r\n      }, \r\n      // 确认选择网点\r\n      handleSuer(id,name,juli){\r\n        if(_self.id == 1){\r\n          uni.setStorageSync(\"wangdian\", {id,name});\r\n          uni.navigateBack({\r\n            delta: 1\r\n          });\r\n          return;\r\n        }\r\n        uni.setStorageSync(\"outlets\", {id,name,juli,current:_self.current});\r\n        wx.navigateBack({\r\n          delta: 1\r\n        });\r\n      },\r\n      search(e){\r\n        e.value = \"\";\r\n      },\r\n      input(e){\r\n        // if(e.value.trim()){\r\n          _self.getWanddian(e.value)\r\n        // }else{\r\n        //   _self.adressList = []\r\n        // }\r\n        console.log(e); \r\n      },\r\n      getWanddian(val){\r\n      const {latitude,longitude} = uni.getStorageSync(\"jingwei\");\r\n      console.log(latitude,longitude);\r\n        common.request({\r\n          path:\"Order/getoutlets\",\r\n          data:{\r\n            name:val,\r\n            longitude,\r\n            latitude,\r\n            rows:5,\r\n            page:1,\r\n            sidx:\"\",\r\n            sord:\"\"\r\n          },\r\n          success:res=>{\r\n            let index;\r\n            res.data.rows.forEach(elem=>{\r\n              if(elem.distance != null){\r\n               index = elem.distance.indexOf(\".\");\r\n              elem.distance = elem.distance.slice(0,index + 2); \r\n              }\r\n            })\r\n            _self.adressList = res.data.rows\r\n            console.log(res);\r\n          }\r\n        })\r\n      },\r\n      // 点击修改地址\r\n      handleUpdate(i){\r\n        let id = \"\";\r\n        _self.shouhuoList.forEach((element,index) => {\r\n          if(i == index){\r\n            uni.setStorageSync(\"adress\", element);\r\n            id = element.ID\r\n          }\r\n        });\r\n        wx.navigateTo({\r\n          url: '../setadress/setAdress?id=' + id,\r\n        });\r\n      },\r\n      // 获取地址列表\r\n      getAdress() {\r\n        let { ID } = uni.getStorageSync(\"userinfo\");\r\n        console.log(ID);\r\n        common.request({\r\n          path: \"Development/getaddress\",\r\n          data: ID,\r\n          success: res => {\r\n            console.log(res);\r\n            _self.shouhuoList = res.data.rows;\r\n          }\r\n        });\r\n        \r\n      }\r\n    },\r\n    watch: {\r\n      current(val){\r\n        if(val == 0){\r\n          _self.getWanddian()\r\n        }else{\r\n          _self.getAdress();\r\n        }\r\n      }\r\n    },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .giveSelect{\r\n    background-color: #f7f5f6;\r\n    height: 100vh;\r\n    .giveselect_tabs{\r\n      width: 80%;\r\n      height: 36rpx;\r\n      border-radius: 18rpx;\r\n    }\r\n    .content{\r\n      .give_search{\r\n        display: flex;\r\n        align-items: center;\r\n        background-color: #fff;\r\n        width: 90%;\r\n        margin: 20rpx auto 0;\r\n        padding-left: 20rpx;\r\n        // border-radius: 8rpx;\r\n        .search{\r\n          width: 70%;\r\n          margin-left: 20rpx;\r\n        }\r\n      }\r\n      .search_wrap{\r\n        .search_item{\r\n          display: flex;\r\n          justify-content: space-between;\r\n          width: 88%;\r\n          margin: 20rpx auto 0;\r\n          padding: 20rpx;\r\n          align-items: center;\r\n          background-color: #fff;\r\n          border-radius: 8rpx;\r\n          .search_item_left{\r\n            .search_left_title{\r\n              \r\n            }\r\n            .search_left_text{\r\n              color: #999;\r\n              margin-top: 10rpx;\r\n            }\r\n          }\r\n          .search_item_right{\r\n            text-align: right;\r\n            .search_right_num{\r\n              color: #999;\r\n            }\r\n            .search_right_btn{\r\n              color: $color;\r\n              margin-top: 10rpx;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .songhuo_wrap{\r\n        .songhuo_item{\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          margin: 0 auto;\r\n          padding: 20rpx;\r\n          margin-top: 15rpx;\r\n          background-color: #fff;\r\n          width: 90%;\r\n          \r\n          .songhuo_item_left{\r\n\r\n            .songhuo_title{\r\n              font-size: 30rpx;\r\n            }\r\n            .songhuo_info{\r\n              font-size: 24rpx;\r\n              color: #999;\r\n              margin-top: 20rpx;\r\n            }\r\n          }\r\n          .songhuo_btn{\r\n            .songhuo_item_right{\r\n            color: #999;\r\n            font-size: 24rpx;\r\n          }\r\n          .songhuo_btn_item{\r\n            color: $color;\r\n            margin-top: 10rpx;\r\n          }\r\n          }\r\n          \r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./giveSelect.vue?vue&type=style&index=0&id=149f8926&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./giveSelect.vue?vue&type=style&index=0&id=149f8926&lang=scss&scoped=true&\""],"sourceRoot":""}