(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/selectOrder/selectOrder"],{152:
/*!**************************************************************************!*\
  !*** D:/work/fucai/main.js?{"page":"pages%2FselectOrder%2FselectOrder"} ***!
  \**************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){n(/*! uni-pages */4);o(n(/*! vue */2));var t=o(n(/*! ./pages/selectOrder/selectOrder.vue */153));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},153:
/*!*******************************************************!*\
  !*** D:/work/fucai/pages/selectOrder/selectOrder.vue ***!
  \*******************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! ./selectOrder.vue?vue&type=template&id=44bfe7ec&scoped=true& */154),r=n(/*! ./selectOrder.vue?vue&type=script&lang=js& */156);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);n(/*! ./selectOrder.vue?vue&type=style&index=0&id=44bfe7ec&lang=scss&scoped=true& */158);var i,u=n(/*! ../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),c=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"44bfe7ec",null,!1,o["components"],i);c.options.__file="pages/selectOrder/selectOrder.vue",t["default"]=c.exports},154:
/*!**************************************************************************************************!*\
  !*** D:/work/fucai/pages/selectOrder/selectOrder.vue?vue&type=template&id=44bfe7ec&scoped=true& ***!
  \**************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectOrder.vue?vue&type=template&id=44bfe7ec&scoped=true& */155);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},155:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/work/fucai/pages/selectOrder/selectOrder.vue?vue&type=template&id=44bfe7ec&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return o}));var r=function(){var e=this,t=e.$createElement;e._self._c},a=!1,i=[];r._withStripped=!0},156:
/*!********************************************************************************!*\
  !*** D:/work/fucai/pages/selectOrder/selectOrder.vue?vue&type=script&lang=js& ***!
  \********************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectOrder.vue?vue&type=script&lang=js& */157),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},157:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/work/fucai/pages/selectOrder/selectOrder.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(/*! ../../common/common */17));function r(e){return e&&e.__esModule?e:{default:e}}var a,i=function(){n.e(/*! require.ensure | components/tabs/segmented */"components/tabs/segmented").then(function(){return resolve(n(/*! @/components/tabs/segmented.vue */295))}.bind(null,n)).catch(n.oe)},u={components:{segmented:i},data:function(){return{wdTitle:"",waiId:"",num:[],type:"",ischange:!1,saveNum:[],tabs:[{id:0,name:"自提",isActive:!0},{id:1,name:"外送",isActive:!1},{id:2,name:"托管",isActive:!1}],current:0,total:0,delivery:"",juli:null,name:"",id:"",outlets:{}}},onLoad:function(e){a=this,console.log(e);var t=e.num.split(","),n=t.findIndex((function(e){return"i"==e})),o=[],r=[];-1!=n?t.forEach((function(e,t){t<n?(a.num.push({num:e,name:"red"}),o.push(e)):t>n&&(a.num.push({num:e,name:"blue"}),r.push(e))})):t.forEach((function(e,t){a.num.push({num:e,name:"red"}),o.push(e)})),o=o.join(","),r=r.join(","),getApp().globalData.saveNum.push({qiu:a.num,price:e.price,red:o,blue:r});var i=getApp().globalData.saveNum;console.log(i),i.forEach((function(e){a.saveNum.push({caipiao:e.qiu,dingtou:1,beishu:1,price:e.price,red:e.red,blue:e.blue}),a.total+=parseInt(e.price)})),console.log(n,a.saveNum),a.type=e.type},onShow:function(){var t=e.getStorageSync("outlets");a.outlets=t,console.log(a.outlets.id,t),void 0!=a.outlets.id?(a.juli=t.juli,a.name=t.name,a.id=t.id,a.current=t.current,a.tabs.forEach((function(e){e.id==t.current?e.isActive=!0:e.isActive=!1}))):(console.log(111111111),0==a.current?a.getWangdian():1==a.current&&a.getAdress());var n=e.getStorageSync("wangdian");null==n&&void 0==n||(a.wdTitle=n.name,a.waiId=n.id);var o=new Date,r=o.getDay();console.log(r)},methods:{handleSelect:function(){wx.navigateTo({url:"../giveSelect/giveSelect?id=1"})},getWangdian:function(){var t=e.getStorageSync("jingwei"),n=t.latitude,r=t.longitude;console.log(n,r),o.default.request({path:"Order/getoutlets",data:{name:"",longitude:r,latitude:n,rows:1,page:1,sidx:"",sord:""},success:function(e){var t;e.data.rows.forEach((function(e){null!=e.distance&&(t=e.distance.indexOf("."),e.distance=e.distance.slice(0,t+2))})),a.name=e.data.rows[0].F_FullName,a.juli=e.data.rows[0].distance,a.id=e.data.rows[0].F_CompanyId,console.log(e)}})},getAdress:function(){var t=e.getStorageSync("userinfo"),n=t.ID;console.log(n),o.default.request({path:"Development/getaddress",data:n,success:function(e){console.log(e),e.data.rows.length>0?(a.name=e.data.rows[0].Address,a.id=e.data.rows[0].ID):a.name=""}})},handleBuy:function(){if(1!=a.current||void 0!=a.wdTitle){console.log(a.wdTitle,a.current);var t=e.getStorageSync("userinfo"),n=t.ID,r=(t.Balance,[]);a.tabs.forEach((function(e){e.isActive&&(a.delivery=e.name)})),a.saveNum.forEach((function(e){console.log(e.red),r.push({RedBall:e.red,BlueBall:e.blue,FixedState:"",Fixed:parseInt(e.dingtou),Multiple:e.beishu}),console.log(e.blue)}));var i=new Date,u=i.getFullYear(),c=i.getMonth(),s=i.getDate(),l=(i.getDay(),i.getHours()),d=i.getMinutes(),f=i.getSeconds();l<10&&(l="0"+l),d<10&&(d="0"+d),f<10&&(f="0"+f),c+=1;var g=u+"-"+c+"-"+s+" "+l+":"+d+":"+f;switch(console.log(g),a.delivery){case"自提":a.delivery=1;break;case"外送":a.delivery=2;break;case"托管":a.delivery=3;break}console.log(a.saveNum.length),0==a.current?o.default.request({path:"Order/addorder",data:{AddTime:g,Number:a.saveNum.length,MemberID:n,Self_Delivery:a.delivery,Price:a.total,LotteryType:a.type,list:r,OrderState:1,Product:"goumai",OutletsID:a.id},success:function(t){e.showToast({title:t.info,icon:"none",duration:1500,mask:!0}),e.reLaunch({url:"../order/myOrder?id=1"}),console.log(t,1111),console.log(r)}}):1==a.current&&(console.log(a.id,a.waiId),o.default.request({path:"Order/addorder",data:{AddTime:g,Number:a.saveNum.length,MemberID:n,Self_Delivery:a.delivery,Price:a.total,LotteryType:a.type,list:r,OrderState:1,DistributionState:"2",AddressID:a.id,OutletsID:a.waiId},success:function(t){e.showToast({title:t.info,icon:"none",duration:1500,mask:!0}),e.reLaunch({url:"../order/myOrder?id=1"}),console.log(t,2222),console.log(r)}}))}else wx.showToast({title:"请选择外送网点",icon:"none",image:"",duration:1500,mask:!0})},handleChild:function(e){console.log(e),a.tabs.forEach((function(t){t.id===e?t.isActive=!0:t.isActive=!1})),a.current=e},handleDingtou:function(e,t){-1==t?a.saveNum.forEach((function(t,n){e==n&&t.dingtou>1&&t.dingtou--})):a.saveNum.forEach((function(t,n){e==n&&t.dingtou++}))},handleBeishu:function(e,t){-1==t?a.saveNum.forEach((function(t,n){e==n&&t.beishu>1&&t.beishu--})):a.saveNum.forEach((function(t,n){e==n&&t.beishu++}))}},watch:{current:function(t){if(0==t)if(void 0===a.outlets.id)a.getWangdian(),a.adress="";else{var n=e.getStorageSync("outlets");a.juli=n.juli,a.name=n.name,a.id=n.id,a.current=n.current}else 1==t&&(console.log(t),a.getAdress(),a.wangdian="",a.juli=null)}}};t.default=u}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},158:
/*!*****************************************************************************************************************!*\
  !*** D:/work/fucai/pages/selectOrder/selectOrder.vue?vue&type=style&index=0&id=44bfe7ec&lang=scss&scoped=true& ***!
  \*****************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../360downloads/Software/HBuilderX_1.9.4.20190426/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectOrder.vue?vue&type=style&index=0&id=44bfe7ec&lang=scss&scoped=true& */159),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},159:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/work/fucai/pages/selectOrder/selectOrder.vue?vue&type=style&index=0&id=44bfe7ec&lang=scss&scoped=true& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){}},[[152,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/selectOrder/selectOrder.js.map